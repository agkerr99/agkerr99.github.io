) %>%
config(displayModeBar = F)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x="Time", y="kBTU",
title = "PGE",
fill = "Fuel Type"
)
pge_plotresidential
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x="Time", y="kBTU",
title = "PGE",
fill = "Fuel Type"
)
pge_plotresidential
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE",
fill = "Fuel Type"
)
pge_plotresidential
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(plotly)
pge_plotcommercial<-
pge_commercialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE",
fill = "Fuel Type"
)
pge_plotcommercial
pge_plotcommercial %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(plotly)
pge_plotcommercial<-
pge_commercialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "Commercial Electric & Gas Consumption from 2017-2021",
fill = "Fuel Type"
)
pge_plotcommercial
pge_plotcommercial %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Residential Electric & Gas Consumption Data from 2017-2021",
fill = "Fuel Type"
)
pge_plotresidential
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(plotly)
pge_plotcommercial<-
pge_commercialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Commercial Electric & Gas Consumption Data from 2017-2021",
fill = "Fuel Type"
)
pge_plotcommercial
pge_plotcommercial %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Residential Electric & Gas Consumption Data from 2017 to 2021",
fill = "Fuel Type"
)
pge_plotresidential
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(plotly)
pge_plotcommercial<-
pge_commercialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Commercial Electric & Gas Consumption Data from 2017 to 2021",
fill = "Fuel Type"
)
pge_plotcommercial
pge_plotcommercial %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Residential Electric & Gas Consumption Data from 2017 to 2021",
fill = "Fuel Type"
)
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(plotly)
pge_plotcommercial<-
pge_commercialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Commercial Electric & Gas Consumption Data from 2017 to 2021",
fill = "Fuel Type"
)
pge_plotcommercial %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_residentialfinal <-
pge_filter_residential %>%
select(
-c(COMBINED, AVERAGEKWH, AVERAGETHM)
) %>%
group_by(YEAR, MONTH, CUSTOMERCLASS) %>%
summarize(
TOTALKWH =
sum(
TOTALKWH,
na.rm = T
),
TOTALTHM =
sum(
TOTALTHM,
na.rm = T
)
) %>%
mutate(
ELEC_KBTU = TOTALKWH*3.41 #1kWh=3.41KBTU
) %>%
mutate(
GAS_KBTU = TOTALTHM*100 #1THM=100KBTU
) %>%
mutate(
DATE=
paste(YEAR,MONTH, "01", sep="-") %>% as.Date()
) %>%
mutate(TOTALBTU = ELEC_KBTU+GAS_KBTU)
pge_commercialfinal <-
pge_filter_commercial %>%
select(
-c(COMBINED, AVERAGEKWH, AVERAGETHM)
) %>%
group_by(YEAR, MONTH, CUSTOMERCLASS) %>%
summarize(
TOTALKWH =
sum(
TOTALKWH,
na.rm = T
),
TOTALTHM =
sum(
TOTALTHM,
na.rm = T
)
) %>%
mutate(
ELEC_KBTU = TOTALKWH*3.41 #1kWh=3.41KBTU
) %>%
mutate(
GAS_KBTU = TOTALTHM*100 #1THM=100KBTU
) %>%
mutate(
DATE=
paste(YEAR,MONTH, "01", sep="-") %>% as.Date()
) %>%
mutate(TOTALBTU = ELEC_KBTU+GAS_KBTU)
install.packages(plotly)
library(plotly)
pge_plotresidential<-
pge_residentialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Residential Electric & Gas Consumption Data from 2017 to 2021",
fill = "Fuel Type"
)
pge_plotresidential %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(plotly)
pge_plotcommercial<-
pge_commercialfinal %>%
ggplot() +
geom_bar(
aes(
x = DATE ,
y = TOTALBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "dodge"
) +
labs(
x="Time", y="kBTU",
title = "PGE Commercial Electric & Gas Consumption Data from 2017 to 2021",
fill = "Fuel Type"
)
pge_plotcommercial %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
summary(cars)
plot(pressure)
epa_owner_data <- getCensus(
name = "acs/acs5",
vintage = 2019,
region = "block group:*",
regionin = "state:06+county:081",
vars = "group(B25095)"
)
library(tidyverse)
library(readxl)
library(tigris)
library(censusapi)
library(sf)
library(leaflet)
Sys.setenv(CENSUS_KEY="0f0e2bffc9d96d5405bcb932e25318a4edb32602")
acs_vars_2019_5yr <-
listCensusMetadata(
name = "2019/acs/acs5",
type = "variables"
)
epa_owner_data <- getCensus(
name = "acs/acs5",
vintage = 2019,
region = "block group:*",
regionin = "state:06+county:081",
vars = "group(B25095)"
)
epa_cbgs <- block_groups("CA", "San Mateo", cb = T, progress_bar = F)
View(epa_owner_data)
epa_owner_data <- getCensus(
name = "acs/acs5",
vintage = 2019,
region = "block group:*",
regionin = "state:06",
vars = "group(B25095)"
)
epa_owner_data <- getCensus(
name = "acs/acs5",
vintage = 2019,
region = "block group:*",
regionin = "state:06+county:006",
vars = "group(B25095)"
)
epa_zoning <- esri2sf("https://services8.arcgis.com/0IC8hha3hgQkmGoa/arcgis/rest/services/EastPaloAltoZoning_2021_WFL1/FeatureServer/1")
library(remotes)
install_github("yonghah/esri2sf")
library(esri2sf)
epa_zoning <- esri2sf("https://services8.arcgis.com/0IC8hha3hgQkmGoa/arcgis/rest/services/EastPaloAltoZoning_2021_WFL1/FeatureServer/1")
library(remotes)
install_github("yonghah/esri2sf")
library(esri2sf)
epa_zoning <- esri2sf("https://services8.arcgis.com/0IC8hha3hgQkmGoa/arcgis/rest/services/EastPaloAltoZoning_2021_WFL1/FeatureServer/1")
library(tidyverse)
library(readxl)
library(tigris)
library(sf)
library(leaflet)
mapview(epa_zoning)
library(mapview)
mapview(epa_zoning)
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
setwd("~/Documents/agkerr99.github.io/218y/Assignment 1")
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
setwd("~/Documents/agkerr99.github.io/218y/Assignment 1")
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
smtaxdata <- read_csv("Secured_Property_Taxes.csv")
smtaxfilter<- smtaxdata %>%
separate(
`Situs Address`,
into= c("Address", "City"),
sep=","
) %>%
filter(
City == " EAST PALO ALTO"
)
smtaxepa<-smtaxfilter %>%
filter(
Exemption == 0 | Exemption == 5600 | Exemption == 7000
) %>%
mutate(
Tenure = if_else(
Exemption == 0, 'Renter', 'Owner'
)
) %>%
dplyr::rename(
APN = `Parcel Number`
) %>%
dplyr::mutate_at(
vars(APN), list(~as.numeric(str_replace_all(.,"-","")
)))
View(epa_zoning)
View(smtaxepa)
install_github("yonghah/esri2sf")
library(esri2sf)
epa_zoning <- esri2sf("https://services8.arcgis.com/0IC8hha3hgQkmGoa/arcgis/rest/services/EastPaloAltoZoning_2021_WFL1/FeatureServer/1")
View(epa_zoning)
epazonemap <- smtaxepa %>%
left_join(
as.data.frame(epa_zoning)
)
epa_zoning$APN <- as.numeric(epa_zoning$APN)
epazonemap <- smtaxepa %>%
left_join(
as.data.frame(epa_zoning)
)
class(epa_zoning$APN)
class(smtaxepa$APN)
