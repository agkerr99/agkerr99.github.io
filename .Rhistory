2+2
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
library(tidyverse)
library(sf)
library(tigris)
library(mapview)
library(leaflet)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sf)
library(tigris)
library(mapview)
install.packages(mapview)
install.packages("mapview")
library(tidyverse)
library(sf)
library(tigris)
library(mapview)
library(leaflet)
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
library(tidyverse)
library(sf)
library(tigris)
library(mapview)
library(leaflet)
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
projection <- "+proj=utm +zone=10 +ellps=GRS80 +datum=NAD83 +units=ft +no_defs"
ca_counties_transformed <-
ca_counties %>%
st_transform(4326) %>%
st_transform(26910) %>%
st_transform(projection) %>%
st_transform(st_crs(ca_counties))
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
bay_phys_health_18 <-
health_ca %>%
filter(
Measure == "Physical health not good for >=14 days among adults aged >=18 years",
Year == 2018
) %>%
left_join(
ca_tracts %>% select(GEOID),
by = c("LocationName" = "GEOID")
) %>%
st_as_sf() %>%
st_centroid() %>%
.[bay_counties, ] %>%
st_set_geometry(NULL) %>%
left_join(
ca_tracts %>% select(GEOID),
by = c("LocationName" = "GEOID")
) %>%
st_as_sf()
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
View(ca_tracts)
health_full <- read_csv("https://chronicdata.cdc.gov/api/views/cwsq-ngmh/rows.csv?accessType=DOWNLOAD")
health_full <- read_csv("https://chronicdata.cdc.gov/api/views/cwsq-ngmh/rows.csv?accessType=DOWNLOAD")
health_ca <- filter(health_full, StateAbbr == "CA")
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
health_full <- read_csv("https://chronicdata.cdc.gov/api/views/cwsq-ngmh/rows.csv?accessType=DOWNLOAD")
year <- 2020
quarters <- 1:4
type <- "Electric"
pge_20_elec <- NULL
for(quarter in quarters) {
filename <-
paste0(
"pge/PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
print(filename)
temp <- read_csv(filename)
pge_20_elec <- rbind(pge_20_elec,temp)
year <- 2020
quarters <- 1:4
type <- "Electric"
pge_20_elec <- NULL
for(quarter in quarters) {
filename <-
paste0(
"pge/PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
print(filename)
temp <- read_csv(filename)
pge_20_elec <- rbind(pge_20_elec,temp)
saveRDS(pge_20_elec, "pge_20_elec.rds")
}
setwd("~/Documents/agkerr99.github.io")
year <- 2020
quarters <- 1:4
type <- "Electric"
pge_20_elec <- NULL
for(quarter in quarters) {
filename <-
paste0(
"pge/PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
print(filename)
temp <- read_csv(filename)
pge_20_elec <- rbind(pge_20_elec,temp)
saveRDS(pge_20_elec, "pge_20_elec.rds")
}
wd()
wd
getwd()
clc
library(tidyverse)
library(sf)
library(tigris)
library(mapview)
library(leaflet)
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
projection <- "+proj=utm +zone=10 +ellps=GRS80 +datum=NAD83 +units=ft +no_defs"
ca_counties_transformed <-
ca_counties %>%
st_transform(4326) %>%
st_transform(26910) %>%
st_transform(projection) %>%
st_transform(st_crs(ca_counties))
health_full <- read_csv("https://chronicdata.cdc.gov/api/views/cwsq-ngmh/rows.csv?accessType=DOWNLOAD")
health_ca <- filter(health_full, StateAbbr == "CA")
library(tidyverse)
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
year <- 2020
quarters <- 1:4
type <- "Electric"
pge_20_elec <- NULL
for(quarter in quarters) {
filename <-
paste0(
"pge/PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
print(filename)
temp <- read_csv(filename)
pge_20_elec <- rbind(pge_20_elec,temp)
saveRDS(pge_20_elec, "pge_20_elec.rds")
}
year <- 2020
quarters <- 1:4
type <- "Electric"
pge_20_elec <- NULL
for(quarter in quarters) {
filename <-
paste0(
"PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
print(filename)
temp <- read_csv(filename)
pge_20_elec <- rbind(pge_20_elec,temp)
saveRDS(pge_20_elec, "pge_20_elec.rds")
}
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
ggplot(ca_counties) + geom_sf()
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
ggplot(ca_counties) + geom_sf()
mapview(ca_counties)
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
ca_counties <- counties("CA", cb = T, progress_bar = F)
st_crs(ca_counties)
ggplot(ca_counties) + geom_sf()
mapview(ca_counties)
leaflet() %>%
addTiles() %>%
addPolygons(
data = ca_counties
) %>%
addMarkers(
data = ca_counties %>%
st_centroid()
)
ca_tracts <- tracts("CA", cb = T, progress_bar = F)
bay_county_names <-
c(
"Alameda",
"Contra Costa",
"Marin",
"Napa",
"San Francisco",
"San Mateo",
"Santa Clara",
"Solano",
"Sonoma"
)
bay_counties <-
counties("CA", cb = T, progress_bar = F) %>%
filter(NAME %in% bay_county_names)
View(bay_counties)
ggplot(bay_counties) + geom_sf()
ca_cities <- places("CA", cb = T, progress_bar = FALSE)
bay_cities <- ca_cities[bay_counties, ]
mapview(bay_counties, alpha.regions = 0) + mapview(bay_cities)
bay_cities_within <-
ca_cities %>%
st_centroid() %>%
.[bay_counties, ] %>%
st_set_geometry(NULL) %>%
left_join(ca_cities %>% select(GEOID)) %>%
st_as_sf()
mapview(bay_counties, alpha.regions = 0) + mapview(bay_cities_within, label = "NAME")
bay_cities_within <-
ca_cities %>%
st_centroid() %>%
.[bay_counties, ] %>%
View(bay_cities_within)
View(ca_cities)
bay_cities_within <-
ca_cities %>%
st_centroid() %>%
.[bay_counties, ] %>%
st_set_geometry(NULL) %>%
left_join(ca_cities %>% select(GEOID)) %>%
st_as_sf()
mapview(bay_counties, alpha.regions = 0) + mapview(bay_cities_within, label = "NAME")
